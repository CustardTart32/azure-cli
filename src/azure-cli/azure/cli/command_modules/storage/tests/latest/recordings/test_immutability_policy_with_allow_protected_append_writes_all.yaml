interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      ParameterSetName:
      - --account-name -n
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/storageAccounts?api-version=2025-01-01
  response:
    body:
      string: '{"value":[{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002","name":"clitest000002","type":"Microsoft.Storage/storageAccounts","location":"eastus2","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-23T09:46:51.3932036Z","key2":"2025-09-23T09:46:51.3932036Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:46:51.4088277Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:46:51.4088277Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2025-09-23T09:46:51.2525789Z","primaryEndpoints":{"dfs":"https://clitest000002.dfs.core.windows.net/","web":"https://clitest000002.z20.web.core.windows.net/","blob":"https://clitest000002.blob.core.windows.net/","queue":"https://clitest000002.queue.core.windows.net/","table":"https://clitest000002.table.core.windows.net/","file":"https://clitest000002.file.core.windows.net/"},"primaryLocation":"eastus2","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgptge5f4spkqnpp5dh5ej6krtxoh5ggqmjtovfddmbs64sck7qk3ozzgdzr5uveiqx/providers/Microsoft.Storage/storageAccounts/clitestjnpgc2vzudy3bfgpg","name":"clitestjnpgc2vzudy3bfgpg","type":"Microsoft.Storage/storageAccounts","location":"eastus2","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-23T09:46:33.8932658Z","key2":"2025-09-23T09:46:33.8932658Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:46:33.9088890Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:46:33.9088890Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2025-09-23T09:46:33.7213903Z","primaryEndpoints":{"dfs":"https://clitestjnpgc2vzudy3bfgpg.dfs.core.windows.net/","web":"https://clitestjnpgc2vzudy3bfgpg.z20.web.core.windows.net/","blob":"https://clitestjnpgc2vzudy3bfgpg.blob.core.windows.net/","queue":"https://clitestjnpgc2vzudy3bfgpg.queue.core.windows.net/","table":"https://clitestjnpgc2vzudy3bfgpg.table.core.windows.net/","file":"https://clitestjnpgc2vzudy3bfgpg.file.core.windows.net/"},"primaryLocation":"eastus2","statusOfPrimary":"available"}},{"sku":{"name":"Standard_RAGRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clistorageys27llwtj6wkvvaygvsuuitquv3qfubjy5huudsriqyfsrvbe3hogi7okwiulvw3w/providers/Microsoft.Storage/storageAccounts/storagegrzsvz7usy65ha63z","name":"storagegrzsvz7usy65ha63z","type":"Microsoft.Storage/storageAccounts","location":"eastus2","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-23T09:44:36.2843118Z","key2":"2025-09-23T09:44:36.2843118Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:44:36.2999372Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:44:36.2999372Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2025-09-23T09:44:36.1124391Z","primaryEndpoints":{"dfs":"https://storagegrzsvz7usy65ha63z.dfs.core.windows.net/","web":"https://storagegrzsvz7usy65ha63z.z20.web.core.windows.net/","blob":"https://storagegrzsvz7usy65ha63z.blob.core.windows.net/","queue":"https://storagegrzsvz7usy65ha63z.queue.core.windows.net/","table":"https://storagegrzsvz7usy65ha63z.table.core.windows.net/","file":"https://storagegrzsvz7usy65ha63z.file.core.windows.net/"},"primaryLocation":"eastus2","statusOfPrimary":"available","secondaryLocation":"centralus","statusOfSecondary":"available","secondaryEndpoints":{"dfs":"https://storagegrzsvz7usy65ha63z-secondary.dfs.core.windows.net/","web":"https://storagegrzsvz7usy65ha63z-secondary.z20.web.core.windows.net/","blob":"https://storagegrzsvz7usy65ha63z-secondary.blob.core.windows.net/","queue":"https://storagegrzsvz7usy65ha63z-secondary.queue.core.windows.net/","table":"https://storagegrzsvz7usy65ha63z-secondary.table.core.windows.net/"}}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgkrsbaydbb5auli5pqpsqzzzwb2ow4og446bm77xeh4qzib4usgndkgjtawvdqd5dc/providers/Microsoft.Storage/storageAccounts/clitest7dwzhymhxab6rq53t","name":"clitest7dwzhymhxab6rq53t","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-22T02:33:33.0760855Z","key2":"2025-09-22T02:33:33.0760855Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T02:33:33.0917161Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T02:33:33.0917161Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2025-09-22T02:33:32.9354566Z","primaryEndpoints":{"blob":"https://clitest7dwzhymhxab6rq53t.blob.core.windows.net/","queue":"https://clitest7dwzhymhxab6rq53t.queue.core.windows.net/","table":"https://clitest7dwzhymhxab6rq53t.table.core.windows.net/","file":"https://clitest7dwzhymhxab6rq53t.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgqevkzlvjads7zyirjywrswqshimke2aw54ze6jcreyjh3fxneaxbap42sviya75ay/providers/Microsoft.Storage/storageAccounts/clitesthupd2jmgvyp7efjjy","name":"clitesthupd2jmgvyp7efjjy","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-22T02:39:16.2382371Z","key2":"2025-09-22T02:39:16.2382371Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T02:39:16.2538575Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T02:39:16.2538575Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2025-09-22T02:39:16.1133112Z","primaryEndpoints":{"blob":"https://clitesthupd2jmgvyp7efjjy.blob.core.windows.net/","queue":"https://clitesthupd2jmgvyp7efjjy.queue.core.windows.net/","table":"https://clitesthupd2jmgvyp7efjjy.table.core.windows.net/","file":"https://clitesthupd2jmgvyp7efjjy.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgjkhwf3et4fprwx3bsmgntfaxdgb6hoa4dmevo4mau23x7d5tgrzwyrepyxfgrj6h3/providers/Microsoft.Storage/storageAccounts/clitesthyfs27umvc3zpes2w","name":"clitesthyfs27umvc3zpes2w","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-23T09:47:09.2448086Z","key2":"2025-09-23T09:47:09.2448086Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:47:09.2604357Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T09:47:09.2604357Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"ResolvingDns","creationTime":"2025-09-23T09:47:09.1198057Z","primaryEndpoints":{"blob":"https://clitesthyfs27umvc3zpes2w.blob.core.windows.net/","queue":"https://clitesthyfs27umvc3zpes2w.queue.core.windows.net/","table":"https://clitesthyfs27umvc3zpes2w.table.core.windows.net/","file":"https://clitesthyfs27umvc3zpes2w.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgvaw52ob4e6t4knglvcfkwkt5pvplcqjcxzfbftqllxpacy5vv2irf2gfuodtwvz5q/providers/Microsoft.Storage/storageAccounts/clitestpkcb3xfvzxeb2ogpk","name":"clitestpkcb3xfvzxeb2ogpk","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-22T02:48:28.0919867Z","key2":"2025-09-22T02:48:28.0919867Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T02:48:28.0919867Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T02:48:28.0919867Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2025-09-22T02:48:27.9826714Z","primaryEndpoints":{"blob":"https://clitestpkcb3xfvzxeb2ogpk.blob.core.windows.net/","queue":"https://clitestpkcb3xfvzxeb2ogpk.queue.core.windows.net/","table":"https://clitestpkcb3xfvzxeb2ogpk.table.core.windows.net/","file":"https://clitestpkcb3xfvzxeb2ogpk.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgcec4m3hx5gjieh47fbge6kjopissq2tkuuhecaswoxvxlx6pmld3wkkkqpbbt64fd/providers/Microsoft.Storage/storageAccounts/clitestr36nz43vogmwl7kfb","name":"clitestr36nz43vogmwl7kfb","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-22T06:54:12.2758834Z","key2":"2025-09-22T06:54:12.2758834Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T06:54:12.2758834Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-22T06:54:12.2758834Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2025-09-22T06:54:12.1820828Z","primaryEndpoints":{"blob":"https://clitestr36nz43vogmwl7kfb.blob.core.windows.net/","queue":"https://clitestr36nz43vogmwl7kfb.queue.core.windows.net/","table":"https://clitestr36nz43vogmwl7kfb.table.core.windows.net/","file":"https://clitestr36nz43vogmwl7kfb.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_active_active_vnet_vnet_connection75ubnsc7vmq546wss3jjf4xh32hs3p3k/providers/Microsoft.Storage/storageAccounts/clitestvpncnnektlxs4oggu","name":"clitestvpncnnektlxs4oggu","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2025-09-23T05:37:40.8345780Z","key2":"2025-09-23T05:37:40.8345780Z"},"allowCrossTenantReplication":false,"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"ipv6Rules":[],"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T05:37:40.8502037Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2025-09-23T05:37:40.8502037Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2025-09-23T05:37:40.7252008Z","primaryEndpoints":{"blob":"https://clitestvpncnnektlxs4oggu.blob.core.windows.net/","queue":"https://clitestvpncnnektlxs4oggu.queue.core.windows.net/","table":"https://clitestvpncnnektlxs4oggu.table.core.windows.net/","file":"https://clitestvpncnnektlxs4oggu.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13817'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 23 Sep 2025 09:47:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - b02b34c7-d8cf-4dd2-bd05-dbcb2f71e499
      - 638c28cd-c9b6-4bda-8405-1c2c0c4bcaa3
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --account-name -n
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/listKeys?api-version=2025-01-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"creationTime":"2025-09-23T09:46:51.3932036Z","keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"creationTime":"2025-09-23T09:46:51.3932036Z","keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '260'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/6b1f5ca2-32fc-46c2-b9b0-12e3e99b525b
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '799'
      x-ms-throttling-version:
      - v1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --account-name -n
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-storage-blob/12.16.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
      x-ms-date:
      - Tue, 23 Sep 2025 09:47:17 GMT
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://clitest000002.blob.core.windows.net/container1?restype=container
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Tue, 23 Sep 2025 09:47:17 GMT
      etag:
      - '"0x8DDFA862F7FEBC1"'
      last-modified:
      - Tue, 23 Sep 2025 09:47:18 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"immutabilityPeriodSinceCreationInDays": 1, "allowProtectedAppendWritesAll":
      true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy create
      Connection:
      - keep-alive
      Content-Length:
      - '99'
      Content-Type:
      - application/json
      ParameterSetName:
      - --account-name -c -g --period --w-all
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa86307a681f\"","properties":{"allowProtectedAppendWritesAll":true,"immutabilityPeriodSinceCreationInDays":1,"state":"Unlocked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '469'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:20 GMT
      etag:
      - '"8ddfa86307a681f"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/f648e68f-5e52-4111-8c04-c0f5eb7f92da
      x-ms-ratelimit-remaining-subscription-writes:
      - '199'
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy show
      Connection:
      - keep-alive
      ParameterSetName:
      - --account-name -c -g
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa86307a681f\"","properties":{"allowProtectedAppendWritesAll":true,"immutabilityPeriodSinceCreationInDays":1,"state":"Unlocked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '469'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:21 GMT
      etag:
      - '"8ddfa86307a681f"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/b12f0fb1-e834-447f-a351-a7202bef45e8
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      If-Match:
      - '"8ddfa86307a681f"'
      ParameterSetName:
      - --account-name -c -g --if-match
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa86326329ef\"","properties":{"immutabilityPeriodSinceCreationInDays":0,"state":"Deleted"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '431'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:23 GMT
      etag:
      - '"8ddfa86326329ef"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/98e3ab32-577b-4548-802a-43ce1be2e74d
      x-ms-ratelimit-remaining-subscription-deletes:
      - '199'
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"immutabilityPeriodSinceCreationInDays": 1, "allowProtectedAppendWritesAll":
      false}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy create
      Connection:
      - keep-alive
      Content-Length:
      - '100'
      Content-Type:
      - application/json
      ParameterSetName:
      - --account-name -c -g --period --w-all
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa86336bcec5\"","properties":{"allowProtectedAppendWritesAll":false,"immutabilityPeriodSinceCreationInDays":1,"state":"Unlocked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '470'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:24 GMT
      etag:
      - '"8ddfa86336bcec5"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/401c86cb-3af1-414d-a27e-f2364511e47f
      x-ms-ratelimit-remaining-subscription-writes:
      - '198'
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"allowProtectedAppendWritesAll": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy create
      Connection:
      - keep-alive
      Content-Length:
      - '55'
      Content-Type:
      - application/json
      ParameterSetName:
      - --account-name -c -g --w-all
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa863479383a\"","properties":{"allowProtectedAppendWritesAll":true,"immutabilityPeriodSinceCreationInDays":1,"state":"Unlocked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '469'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:26 GMT
      etag:
      - '"8ddfa863479383a"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/1f3da87b-f065-465b-b6de-4f262c868dd3
      x-ms-ratelimit-remaining-subscription-writes:
      - '198'
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy show
      Connection:
      - keep-alive
      ParameterSetName:
      - --account-name -c -g
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa863479383a\"","properties":{"allowProtectedAppendWritesAll":true,"immutabilityPeriodSinceCreationInDays":1,"state":"Unlocked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '469'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:28 GMT
      etag:
      - '"8ddfa863479383a"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/c0c2f774-9774-40b0-aa5b-34f034b3f47b
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy lock
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      If-Match:
      - '"8ddfa863479383a"'
      ParameterSetName:
      - --account-name -c -g --if-match
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default/lock?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa863661f9fe\"","properties":{"allowProtectedAppendWritesAll":true,"immutabilityPeriodSinceCreationInDays":1,"state":"Locked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '467'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:29 GMT
      etag:
      - '"8ddfa863661f9fe"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/7aa1030c-c5c0-46b5-8bfb-1e6544f38d89
      x-ms-ratelimit-remaining-subscription-writes:
      - '198'
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy show
      Connection:
      - keep-alive
      ParameterSetName:
      - --account-name -c -g
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa863661f9fe\"","properties":{"allowProtectedAppendWritesAll":true,"immutabilityPeriodSinceCreationInDays":1,"state":"Locked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '467'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:31 GMT
      etag:
      - '"8ddfa863661f9fe"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/dde69a12-0154-486b-bbd1-ddd2a4997a8d
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"immutabilityPeriodSinceCreationInDays": 5}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container immutability-policy extend
      Connection:
      - keep-alive
      Content-Length:
      - '60'
      Content-Type:
      - application/json
      If-Match:
      - '"8ddfa863661f9fe"'
      ParameterSetName:
      - --account-name -c -g --period --if-match
      User-Agent:
      - AZURECLI/2.77.0 azsdk-python-core/1.35.0 Python/3.12.10 (Windows-10-10.0.19045-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default/extend?api-version=2025-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/blobServices/default/containers/container1/immutabilityPolicies/default","name":"default","type":"Microsoft.Storage/storageAccounts/blobServices/containers/immutabilityPolicies","etag":"\"8ddfa8638485951\"","properties":{"allowProtectedAppendWritesAll":true,"immutabilityPeriodSinceCreationInDays":5,"state":"Locked"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '467'
      content-type:
      - application/json
      date:
      - Tue, 23 Sep 2025 09:47:33 GMT
      etag:
      - '"8ddfa8638485951"'
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-operation-identifier:
      - tenantId=7b31ddc4-9101-4ef0-a387-79ce181cacdb,objectId=7b1bdbe4-80ac-47f9-882b-33d6e62950ab/eastus2euap/66f3258a-602d-411b-8ec8-20bdeaa240cb
      x-ms-ratelimit-remaining-subscription-writes:
      - '198'
      x-ms-throttling-version:
      - v2
    status:
      code: 200
      message: OK
version: 1
